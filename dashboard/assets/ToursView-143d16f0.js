import{g as r,h as C,o as S,c as x,j as o,k as f,l as t,i as m,a as e,p as n,q as v,x as D,y as T}from"./index-8c8180a4.js";import{a as u,b as I}from"./column.esm-dcf3a927.js";import{s as M}from"./textarea.esm-b841ba67.js";const z={class:"table-header"},A={class:"p-input-icon-left"},F=e("i",{class:"pi pi-search"},null,-1),L={class:"table-actions"},N={class:"form-row"},P={class:"form-column"},B={class:"p-float-label"},R=e("label",{for:"title"},"Titlu",-1),E={class:"p-float-label p-input-icon-right"},O=e("i",{class:"pi pi-euro"},null,-1),j=e("label",{for:"price"},"Pret",-1),q={class:"form-column"},G={class:"p-float-label p-input-icon-left"},H=e("i",{class:"pi pi-map-marker"},null,-1),W=e("label",{for:"location"},"Locatie",-1),Z={class:"p-float-label p-input-icon-left"},J=e("i",{class:"pi pi-map-marker"},null,-1),K=e("label",{for:"country"},"Tara",-1),Q={class:"form-row"},X={class:"form-column"},Y={class:"p-float-label p-input-icon-left"},ee=e("i",{class:"pi pi-sun"},null,-1),le=e("label",{for:"duration"},"Zile",-1),ae={class:"p-float-label p-input-icon-left"},oe=e("i",{class:"pi pi-users"},null,-1),te=e("label",{for:"adults"},"Locuri",-1),se={class:"form-column"},ie={class:"p-float-label p-input-icon-left"},ne=e("i",{class:"pi pi-star"},null,-1),ue=e("label",{for:"rating"},"Stele",-1),re={class:"form-column"},de={class:"p-float-label p-input-icon-left"},ce=e("i",{class:"pi pi-angle-double-right"},null,-1),pe=e("label",{for:"departure"},"Plecare",-1),me={class:"form-row"},ve={class:"form-column"},_e={class:"p-float-label p-input-icon-left"},fe=e("i",{class:"pi pi-angle-double-left"},null,-1),be=e("label",{for:"arrival"},"Sosire",-1),he={class:"form-column"},ge={class:"p-float-label",style:{width:"100%"}},Ve=e("label",{for:"description"},"Descriere",-1),Te={class:"form-column form-image"},$e=e("label",{for:"img"},"Imagine",-1),we={class:"image-preview"},ye=["src"],xe={__name:"ToursView",setup(Ue){const V=r([]),s=r({}),d=r(!1),b=r(!1),c=window.location.origin,_=r({global:{value:null,matchMode:T.CONTAINS},title:{value:null,matchMode:T.STARTS_WITH}});function p(){m.get(`${c}/tours`).then(i=>{V.value=i.data})}C(()=>{p()});const h=r(null),g=r(""),$=i=>{h.value=i.target.files[0];let a=`${c}/images/${h.value.name}`;s.value.img=a,g.value=a},w=i=>{m.delete(`${c}/tours/${i.id}`).then(()=>{p()})},y=i=>{s.value=i,b.value=!0,d.value=!0,g.value=i.img},U=i=>{if(i.preventDefault(),b.value===!0)m.put(`${c}/tours/${s.value.id}`,s.value).then(()=>{d.value=!1,b.value=!1,p()});else{m.post(`${c}/newTour`,s.value).then(l=>{d.value=!1,p()}).catch(l=>{console.log(l)});let a=new FormData;a.append("offerImage",h.value),m.post(`${c}/imageOffers`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{l.status===200&&console.log("Success")}).catch(l=>{console.log(l)})}};return(i,a)=>(S(),x("div",null,[o(t(I),{filters:_.value,"onUpdate:filters":a[3]||(a[3]=l=>_.value=l),value:V.value,paginator:"",rows:6,filterDisplay:"row",removableSort:""},{header:f(()=>[e("div",z,[e("span",A,[F,o(t(n),{modelValue:_.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=l=>_.value.global.value=l),placeholder:"Cautare globala"},null,8,["modelValue"])]),o(t(v),{icon:"pi pi-plus",class:"p-button-success",label:"Adauga circuit nou",onClick:a[1]||(a[1]=l=>d.value=!0)}),o(t(v),{icon:"pi pi-refresh",class:"p-button-warning",label:"Actualizare",onClick:a[2]||(a[2]=l=>p())})])]),default:f(()=>[o(t(u),{field:"title",header:"Titlu"}),o(t(u),{field:"price",header:"Pret"}),o(t(u),{field:"country",header:"Tara"}),o(t(u),{field:"duration",header:"Durata"}),o(t(u),{field:"available",header:"Disponibilitate"}),o(t(u),{field:"rating",header:"Stele"}),o(t(u),{field:"departure",header:"Plecare"}),o(t(u),{field:"arrival",header:"Sosire"}),o(t(u),null,{body:f(l=>[e("div",L,[o(t(v),{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:k=>y(l.data)},null,8,["onClick"]),o(t(v),{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:k=>w(l.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["filters","value"]),o(t(D),{class:"tour-dialog",modal:"",visible:d.value,"onUpdate:visible":a[14]||(a[14]=l=>d.value=l),header:"Creeaza circuit",maximizable:""},{default:f(()=>[e("form",null,[e("div",N,[e("div",P,[e("span",B,[o(t(n),{id:"title",modelValue:s.value.title,"onUpdate:modelValue":a[4]||(a[4]=l=>s.value.title=l)},null,8,["modelValue"]),R]),e("span",E,[O,o(t(n),{id:"price",modelValue:s.value.price,"onUpdate:modelValue":a[5]||(a[5]=l=>s.value.price=l),type:"number"},null,8,["modelValue"]),j])]),e("div",q,[e("span",G,[H,o(t(n),{id:"location",modelValue:s.value.location,"onUpdate:modelValue":a[6]||(a[6]=l=>s.value.location=l)},null,8,["modelValue"]),W]),e("span",Z,[J,o(t(n),{id:"country",modelValue:s.value.country,"onUpdate:modelValue":a[7]||(a[7]=l=>s.value.country=l)},null,8,["modelValue"]),K])])]),e("div",Q,[e("div",X,[e("span",Y,[ee,o(t(n),{id:"duration",modelValue:s.value.duration,"onUpdate:modelValue":a[8]||(a[8]=l=>s.value.duration=l)},null,8,["modelValue"]),le]),e("span",ae,[oe,o(t(n),{id:"adults",type:"number",modelValue:s.value.available,"onUpdate:modelValue":a[9]||(a[9]=l=>s.value.available=l)},null,8,["modelValue"]),te])]),e("div",se,[e("span",ie,[ne,o(t(n),{id:"rating",type:"number",min:1,max:5,modelValue:s.value.rating,"onUpdate:modelValue":a[10]||(a[10]=l=>s.value.rating=l)},null,8,["modelValue"]),ue])]),e("div",re,[e("span",de,[ce,o(t(n),{id:"departure",modelValue:s.value.departure,"onUpdate:modelValue":a[11]||(a[11]=l=>s.value.departure=l)},null,8,["modelValue"]),pe])])]),e("div",me,[e("div",ve,[e("span",_e,[fe,o(t(n),{id:"arrival",modelValue:s.value.arrival,"onUpdate:modelValue":a[12]||(a[12]=l=>s.value.arrival=l)},null,8,["modelValue"]),be])])]),e("div",he,[e("span",ge,[o(t(M),{id:"description",modelValue:s.value.description,"onUpdate:modelValue":a[13]||(a[13]=l=>s.value.description=l)},null,8,["modelValue"]),Ve])]),e("div",Te,[$e,e("input",{id:"img",type:"file",accept:"image/*",onInput:$},null,32)]),e("div",we,[e("img",{src:g.value},null,8,ye)]),o(t(v),{type:"submit",label:"Salveaza",class:"p-button-success",onClick:U})])]),_:1},8,["visible"])]))}};export{xe as default};
